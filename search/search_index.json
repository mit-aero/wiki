{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to AeroWiki","text":""},{"location":"#how-to-use","title":"How to Use","text":"<ul> <li>Visit AeroWiki</li> </ul>"},{"location":"#how-to-contribute","title":"How to contribute","text":"<ul> <li>Clone this repository</li> <li>Add or edit markdown files in <code>docs</code> directory.</li> <li>Push changes.</li> </ul>"},{"location":"aerowiki/deployment/","title":"Deployment","text":"<p>This page describes how the aerowiki infrastructure is deployed.</p>"},{"location":"aerowiki/deployment/#source","title":"Source","text":"<p>The source of the wiki is a the wiki repository. This repository contains the markdown files for the content, the MkDocs configuration file and the deployment scripts.</p>"},{"location":"aerowiki/deployment/#source-files","title":"Source files","text":"<p>The source files are in the docs directory.</p>"},{"location":"aerowiki/deployment/#mkdocs-config","title":"MkDocs config","text":"<p>The MkDocs config is in the mkdocs.yml file at the root of the repository.</p>"},{"location":"aerowiki/deployment/#deployment-scripts","title":"Deployment scripts","text":"<p>The wiki is hosted on github pages. Since github does not allow content from a private repository to be published on github pages, the markdown files in this repository are converted into html and pushed into a [separate repository]. This repository contains a deploy script in the <code>.github/workflows/deploy.yml</code> file. It uses Github Actions to convert markdown files into html using MkDocs and pushes them to the aerowiki repository. </p> <p>The script uses credentials of the mit-aero-bot account. It uses a fine-grained access token to grant read and write access of repositories to the action runner.</p>"},{"location":"aerowiki/deployment/#steps-to-create-fine-grained-token","title":"Steps to create fine grained token:","text":"<ul> <li> <p>Create a fine grained token in the mit-aero-bot account.</p> <ul> <li>Login to mit-aero-bot account.</li> <li>Go to Settings &gt; Developer Settings &gt; Personal Access Tokens &gt; Fine-grained tokens.</li> <li>Click generate new token.</li> <li>Give the token a name.</li> <li>Set the resource owner as the mit-aero organization.</li> <li>Set the expiration date to the max permitted value (366 days in this case).</li> <li>In Resource Access select the option Only select repositories.</li> <li>Choose the repositories that the token should have access to (wiki and aerowiki in this case).</li> <li>Click Add permissions button and select Contents.</li> <li>Select Read and write from the access dropdown for contents.</li> <li>Click Generate token and request access.</li> <li>Copy the access token.</li> </ul> </li> <li> <p>Grant permission to token for organization.</p> <ul> <li>Login to admin account.</li> <li>Go to the organization page.</li> <li>Go to Settings &gt; Personal access tokens &gt; Pending requests.</li> <li>Approve the request.</li> </ul> </li> <li> <p>Add token to repository secrets.</p> <ul> <li>Go to wiki repository.</li> <li>Go to Settings &gt; Secrets and variables &gt; Actions.</li> <li>Scroll to Repository secrets.</li> <li>Edit or create a new secret called PUSH_REPO_TOKEN.</li> <li>In it paste the access token in the value field.</li> </ul> </li> <li> <p>Test the new token.</p> <ul> <li>Now the token should be usable</li> <li>Make any commit to the wiki repository and see if the workflow run succeeds or not.</li> </ul> </li> </ul>"}]}